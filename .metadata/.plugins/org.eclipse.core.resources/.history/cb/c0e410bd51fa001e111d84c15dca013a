package com.project.plantcare.service;

import java.util.Optional;

import org.springframework.stereotype.Service;

import com.project.plantcare.dto.DeviceDTO;
import com.project.plantcare.entity.Device;
import com.project.plantcare.repository.DeviceRepository;

import lombok.RequiredArgsConstructor;

@Service
@RequiredArgsConstructor
public class DeviceService {

	private final DeviceRepository deviceRepository;

	public boolean deviceCheck(DeviceDTO deviceDTO) {
		Optional<Device> optionalDevice = deviceRepository.findById(deviceDTO.getDeviceId());
			if(optionalDevice.isPresent()) {
				  Device device = optionalDevice.get();
				  if(device.isDeviceUse()) {
					  return false;
				  }
				  if(device.getDevicePw().equals(deviceDTO.getDevicePw())) {
					  device.setDeviceUse(true);		
					  return true;
				  }
				  return false;
			}else {
				return false;
			}
		}

	public void deviceUpdate() {

	}

}
